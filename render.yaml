services:
  # ----------------------------------------
  # 1. Backend (API)
  # ----------------------------------------
  - type: web
    name: awdu3-backend
    runtime: docker
    plan: free
    region: oregon
    dockerfilePath: ./Dockerfile.backend
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4002
      - key: FRONTEND_URL
        value: https://awdu3-frontend.onrender.com
      # Importamos variables del grupo
      - fromGroup: app-settings

  # ----------------------------------------
  # 2. Frontend (React)
  # ----------------------------------------
  - type: web
    name: awdu3-frontend
    runtime: docker
    plan: free
    region: oregon
    dockerContext: ./client
    dockerfilePath: ./client/Dockerfile.frontend
    envVars:
      # URL del backend
      - key: REACT_APP_API_URL
        value: https://awdu3-backend.onrender.com
      # Importamos variables del grupo
      - fromGroup: app-settings

# ----------------------------------------
# VARIABLES GLOBALES
# ----------------------------------------
envVarGroups:
  - name: app-settings
    envVars:
      - key: NODE_ENV
        value: production
      # MongoDB URI - Actualiza con tu conexi√≥n
      - key: MONGODB_URI
        value: mongodb+srv://Danna:Danna@cluster0.ravjkye.mongodb.net/DannaStore
